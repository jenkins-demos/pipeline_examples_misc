pipeline{
    agent any
    parameters{
        //choice(choices: ['dev', 'prd', 'ist'], description: 'What environment ?', name: 'envtarget')
        string(defaultValue: "", description: 'App Name ?', name: 'appName')
        string(defaultValue: "", description: 'Component Name ?', name: 'compName')
        string(defaultValue: "", description: 'Component Version ?', name: 'compVersion')
        string(defaultValue: "dev", description: 'Environment Name ?', name: 'envName')
    }
    stages{
        stage('check'){
            steps{
            echo "${params.envtarget}"
        
            }
        }
        stage('call proceedure'){
            
            
            steps{
                step([$class: 'ElectricFlowRunProcedure',
                      configuration: 'flow',
                      projectName : 'Training_sbrown',
                      procedureName : 'SimpleProceedureTest',
                      procedureParameters : """{"procedure":{"procedureName":"SimpleProceedureTest",
                      "parameters":[
                            {"actualParameterName":"appName","value":"${params.appName}"},
                            {"actualParameterName":"appName","value":"${params.compName}"},
                            {"actualParameterName":"appName","value":"${params.compVersion}"},
                            {"actualParameterName":"appName","value":"${params.envName}"}
                      ]}}"""
                ])
            }
        }
        
    }
}
